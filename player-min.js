void function(a){function g(a,b){a||(a={});for(var c in b)a[c]=b[c]}function h(){c.addEventListener("play",function(){b.sendToNative("onplay",JSON.stringify({isUser:!1}))}),c.addEventListener("ended",function(){b.sendToNative("onended","")}),c.addEventListener("pause",function(){b.sendToNative("onpause",{isUser:!1})}),c.addEventListener("error",function(a){b.sendToNative("onerror",JSON.stringify(a))})}function i(){c=document.documentElement.getElementsByTagName("audio")[0],!c&&d>e&&setTimeout(function(){i(),e+=50},50),!c&&e>=d&&b.sendToNative("onerror",JSON.stringify({error:"timeout"})),c&&(b.sendToNative("onready",JSON.stringify({source:l()})),k(),j(),wandoujia.audio.duration(),h())}function j(){f||(c.pause(),setTimeout(j,50))}function k(){var a,b;c.src||(a=document.querySelector("a"),b=document.createEvent("MouseEvents"),b.initEvent("click",!1,!1),a.dispatchEvent(b),setTimeout(k,50))}function l(){var b,a={"kugou.com":"kugou","duomi.com":"duomi","163.com":"163","xiami.com":"xiami","qq.com":"qq","baidu.com":"baidu","dongting.com":"dongting"};for(b in a)if(-1!==location.host.indexOf(b))return a[b]}var b,c,d,e,f;a.wandoujia=a.wandoujia||{},a.wandoujia.audio=a.wandoujia.audio||{},b=a.NativeCallback||{},b.sendToNative=b.sendToNative||function(){},d=1e4,e=0,f=!1,g(a.wandoujia.audio,{audioDom:c,hasAudio:function(){return!!c},play:function(){f||(f=!0),c.play(),b.sendToNative("onplay",JSON.stringify({isUser:!0}))},pause:function(){c.pause(),b.sendToNative("onpause",JSON.stringify({isUser:!0}))},stop:function(){c.pause(),c.currentTime=0},progress:function(a){arguments.length?c.currentTime=Number(a):b.sendToNative("progress",JSON.stringify({progress:c.currentTime}))},duration:function(){var d,a=50;c.currentTime?(d=c.currentTime+a,c.currentTime+=a,c.duration&&d>c.currentTime?(b.sendToNative("duration",JSON.stringify({duration:Math.max(c.currentTime,c.duration)})),c.currentTime=0):wandoujia.audio.duration()):setTimeout(function(){wandoujia.audio.duration()},100)}}),i()}(window);