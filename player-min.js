void function(window){window.wandoujia=window.wandoujia||{};var NativeCallback=window.NativeCallback||{};NativeCallback.sendToNative=NativeCallback.sendToNative||function(){};var audioDom;var MAX_TIME=10000;var timer=0;function getAudioDom(){audioDom=document.documentElement.getElementsByTagName('audio')[0];if(!audioDom&&(timer<MAX_TIME)){setTimeout(function(){getAudioDom();timer+=50},50)}if(audioDom){NativeCallback.sendToNative('onready',JSON.stringify({duration:audioDom.duration,src:audioDom.src}))}return audioDom}getAudioDom();wandoujia.audio={audioDom:audioDom,hasAudio:function(){return!!audioDom},play:function(){audioDom.play()},pause:function(){audioDom.pause()},stop:function(){audioDom.pause();audioDom.currentTime=0},progress:function(time){if(arguments.length){audioDom.currentTime=Number(time)}else{NativeCallback.sendToNative('progress',JSON.stringify({progress:audioDom.currentTime}))}},duration:function(){NativeCallback.sendToNative('duration',JSON.stringify({duration:audioDom.duration}))}};audioDom.addEventListener('play',function(){NativeCallback.sendToNative('onplay','')});audioDom.addEventListener('ended',function(){NativeCallback.sendToNative('onended','')});audioDom.addEventListener('pause',function(){NativeCallback.sendToNative('onpause','')});audioDom.addEventListener('error',function(data){NativeCallback.sendToNative('onerror',JSON.stringify(data))})}(window);